Advanced form with submit callback and optimization

Same as "Advanced form with submit callback" but you may want to save some CPU.